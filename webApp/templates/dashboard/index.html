{% extends "layout/dashboard_base.html" %}

{% import 'components/form_field.html' as macross %}
{% import 'components/card.html' as macros %}

{% block title %}
dashboard
{% endblock %}
{% block content %}
<div class="row">
  <div class="mt-4 mb-4">
    <h3>Welcome Back {{ user_info.first_name }} {{ user_info.last_name }}</h3>
  </div>
</div>

<div class="row">
  <div class="col-xl-4 col-sm-12">
    {% call macros.card('Admin', 'card-left-border-green') %}
    <ul>
      <li>Can update profile</li>
      <li>Can manage staff</li>
      <li>Can manage pest controller</li>
      <li>Can manage pest</li>
    </ul>
    {% endcall %}
  </div>
  <div class="col-xl-4 col-sm-12">
    {% call macros.card('Staff', 'card-left-border-red') %}
    <ul>
      <li>Can update profile</li>
      <li>Can manage pest controller</li>
      <li>Can manage pest</li>
    </ul>
    {% endcall %}
  </div>
  <div class="col-xl-4 col-sm-12">
    {% call macros.card('Pest Controller', 'card-left-border-yellow') %}
    <ul>
      <li>Can update profile</li>
      <li>Can View Pest</li>
    </ul>
    {% endcall %}
  </div>
</div>

<div class='row'>
  <div class="panel mb-g">
    <div class="panel-body">
      {% call macros.card('Personal Info') %}

      <form method='POST'>
        {{ macross.form_field('Email', 'email', 'email', user_info.user_email, readonly=true) }}
        {{ macross.form_field('Role', 'role', 'text', user_info.user_role, readonly=true) }}

        <fieldset class="row mb-3">
          <legend class="col-form-label col-sm-2 pt-0">Personal Details</legend>
          <div class="col-sm-10">
            {{ macross.form_field('First Name', 'fname', 'text', user_info.first_name) }}
            {{ macross.form_field('Last Name', 'lname', 'text', user_info.last_name) }}
            {{ macross.form_field('Department', 'department', 'select', user_info.department_id, options=departments) }}
            {{ macross.form_field('Position', 'position', 'select', user_info.position_id, options=positions) }}
            {{ macross.form_field('Work Phone', 'wphone', 'text', user_info.work_phone) }}
            {{ macross.form_field('Hire Date', 'hdate', 'text', user_info.hired_at, readonly=true) }}
          </div>
        </fieldset>

        <button type="submit" class="btn btn-primary">Update Information</button>
        <a href="/reset-password">Reset Password</a>
      </form>

      {% endcall %}
    </div>
  </div>
</div>
{% endblock %}